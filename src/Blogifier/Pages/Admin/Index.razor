@page "/admin"

<div class="row no-gutters">
    <div class="col-8">
        <Published @ref="PublishedInstance" OnUpdate="UpdateHandler" />
    </div>
    <div class="col-4">
        <div>
            <Profile />
        </div>
        <div>
            <Welcome @ref="WelcomeInstance" OnUpdate="UpdateHandler" />
        </div>
        <div>
            <MainChart />
        </div>
        <div>
            <Custom />
        </div>
    </div>
</div>

@*
    // replacing drafts with filters for posts
    <Drafts @ref="DraftsInstance" OnUpdate="UpdateHandler" />
*@

@code {

    Drafts DraftsInstance;
    Published PublishedInstance;
    Welcome WelcomeInstance;

    async Task UpdateHandler(string msg)
    {
        //if(msg == "publish" || msg == "unfeature")
        //{
        //    await DraftsInstance.Load();
        //    await PublishedInstance.LoadPosts(1);
        //}
        //if(msg == "unpublish" || msg == "add")
        //{
        //    await DraftsInstance.Load();
        //    await PublishedInstance.LoadPosts(1);
        //}
        //if(msg == "feature")
        //{
        //    await PublishedInstance.LoadPosts(1);
        //}
        //if(msg == "remove")
        //{
        //    await PublishedInstance.LoadPosts(1);
        //    await DraftsInstance.Load();
        //}

        // await DraftsInstance.Load();
        await PublishedInstance.LoadPosts(1);

        await WelcomeInstance.Load();
    }
}