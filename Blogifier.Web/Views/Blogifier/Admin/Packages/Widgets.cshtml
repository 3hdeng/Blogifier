@model Blogifier.Core.Data.Models.AdminPackagesModel
@using Blogifier.Core.Common
@{
    ViewData["Title"] = "Widgets";
    Layout = $"~/{ApplicationSettings.BlogAdminFolder}/_Layout/_Packages.cshtml";
}

@if (Model.Packages.Any())
{
    @foreach (var item in Model.Packages)
    {
        var publishedClass = item.Enabled ? "published" : "draft";
        <div class="bf-packages-list-item d-flex">
            <div class="bf-packages-list-item-logo"><img class="bf-packages-list-item-img" src="@item.Icon" alt="@item.Title"></div>
            <div class="bf-packages-list-item-info d-flex flex-column">
                <div class="bf-packages-list-item-title">@item.Title</div>
                <div class="bf-packages-list-item-desc">@item.Description</div>
                <div class="bf-packages-list-item-actions mt-auto">
                    @if (item.HasSettings && 1 == 2)
                    {
                        <a href="~/blogifier/widgets/@item.Title/settings" class="btn btn-outline-secondary btn-sm btn-rounded mr-2"><i class="fa fa-cog mr-1"></i> Settings</a>
                    }
                    <div class="btn-group">
                        @if (item.Enabled)
                        {
                            <button type="button" class="btn btn-outline-secondary btn-sm btn-rounded" onclick="return packagesController.disable('@item.Title')"><i class="fa fa-pause mr-1"></i> Disable</button>
                        }
                        else
                        {
                            <button type="button" class="btn btn-outline-secondary btn-sm btn-rounded" onclick="return packagesController.enable('@item.Title')"><i class="fa fa-play mr-1"></i> Enable</button>
                        }
                        @*<button type="button" class="btn btn-outline-secondary btn-sm btn-rounded"><i class="fa fa-trash mr-1"></i> Delete</button>*@
                        <button type="button" class="btn btn-outline-secondary btn-sm btn-rounded" onclick="return packagesController.showInfo('@item.Title')">
                            <i class="fa fa-info-circle mr-1"></i> Info
                        </button>
                    </div>
                </div>
            </div>
        </div>
    }
}
else
{
    <div class="bf-list-empty">
        No widgets found!
    </div>
}

@section Scripts{
    <script src="~/admin/js/app/packagesController.js"></script>
}