@model Blogifier.Core.Data.Models.AdminPackagesModel
@using Blogifier.Core.Common
@using Newtonsoft.Json
@{
    ViewData["Title"] = "Widgets";
    Layout = $"~/{ApplicationSettings.BlogAdminFolder}/_Layout/_Packages.cshtml";
}

@if (Model.Packages.Any())
{
    @foreach (var item in Model.Packages)
    {
        var publishedClass = item.Enabled ? "published" : "draft";
        <div class="bf-packages-list-item d-flex">
            <div class="bf-packages-list-item-logo"><img class="bf-packages-list-item-img" src="@item.Icon" alt="@item.Title"></div>
            <div class="bf-packages-list-item-info d-flex flex-column">
                <div class="bf-packages-list-item-title">@item.Title</div>
                <div class="bf-packages-list-item-desc">@item.Description</div>
                <div class="bf-packages-list-item-actions mt-auto">

                    <a href="~/blogifier/widgets/@item.Title/settings" class="btn btn-outline-secondary btn-sm btn-rounded mr-2"><i class="fa fa-cog mr-1"></i> Settings</a>
                    <div class="btn-group">
                        <!--
                          NOTE: if the item is enable or disable we should toggle them. like the Music player play and pause button.
                        -->
                        <button type="button" class="btn btn-outline-secondary btn-sm btn-rounded"><i class="fa fa-play mr-1"></i> Enable</button>
                        <button type="button" class="btn btn-outline-secondary btn-sm btn-rounded"><i class="fa fa-pause mr-1"></i> disable</button>
                        <button type="button" class="btn btn-outline-secondary btn-sm btn-rounded"><i class="fa fa-trash mr-1"></i> Delete</button>
                        <button type="button" class="btn btn-outline-secondary btn-sm btn-rounded" data-toggle="modal" data-target="#packageInfo" data-title="@item.Title" data-desc="@item.Description" data-version="1.0" data-logo="/embedded/lib/img/cover.png" data-cover="/embedded/lib/img/cover.png" data-date="November 20, 2017" data-installs="48894" data-developer="Ruslan Tur"><i class="fa fa-info-circle mr-1"></i> info</button>
                    </div>
                </div>
            </div>
        </div>
    }
}
else
{
    <div class="bf-list-empty">
        No widgets found!
    </div>
}


<!-- Package Info -->
<div class="modal fade" id="packageInfo" tabindex="-1" role="dialog" aria-labelledby="packageInfoLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="packageInfoLabel">Package Info</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><i class="fa fa-times"></i></button>
            </div>
            <div class="bf-package-info">
                <div class="bf-package-info-cover">
                    <img src="" alt="Package Title" />
                </div>
                <div class="bf-package-info-body">
                    <div class="bf-package-info-header">
                        <img class="bf-package-info-logo" src="" alt="Package Title" />
                        <h4 class="bf-package-info-title">Package Title</h4>
                        <div class="bf-package-info-rating"><i class="fa fa-star active"></i><i class="fa fa-star active"></i><i class="fa fa-star active"></i><i class="fa fa-star active"></i><i class="fa fa-star"></i></div>
                    </div>
                    <p class="bf-package-info-desc"></p>
                    <hr class="my-4" />
                    <table class="table bf-package-info-table">
                        <tr>
                            <td>Version</td>
                            <td class="bf-package-info-version"></td>
                        </tr>
                        <tr>
                            <td>Updated</td>
                            <td class="bf-package-info-date"></td>
                        </tr>
                        <tr>
                            <td>Developer</td>
                            <td class="bf-package-info-developer"></td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
<!--/Package Info -->


@section Scripts{
    <script src="~/admin/js/app/packagesController.js"></script>
    <script>
        packagesController.packages = eval(@Html.Raw(JsonConvert.SerializeObject(Model.Packages, Formatting.Indented)))
    </script>
}
